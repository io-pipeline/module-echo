# Echo Module Configuration

# Basic module configuration
module.name=echo
quarkus.application.name=echo

# Production HTTP/gRPC Server Configuration  
quarkus.http.port=39000
quarkus.http.host=0.0.0.0
quarkus.http.test-port=49000
quarkus.grpc.server.use-separate-server=false

# Context path for web routing
quarkus.http.root-path=/echo

# Development override (use same port as production for consistency)
%dev.quarkus.http.port=39000
%dev.quarkus.http.host=0.0.0.0

# Health Configuration
quarkus.smallrye-health.root-path=/health

# Enable OpenAPI
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."io.pipeline".level=DEBUG

# Registration Service Discovery via Consul (required)
quarkus.grpc.clients.registration-service.host=registration-service
quarkus.grpc.clients.registration-service.name-resolver=stork
quarkus.stork.registration-service.service-discovery.type=consul
quarkus.stork.registration-service.service-discovery.consul-host=${CONSUL_HOST:consul}
quarkus.stork.registration-service.service-discovery.consul-port=${CONSUL_PORT:8500}

# Development override - use localhost in dev mode
%dev.quarkus.stork.registration-service.service-discovery.consul-host=localhost

# Module Registration Configuration
module.registration.enabled=true
module.registration.module-name=echo
module.registration.host=localhost
module.registration.port=${quarkus.http.port}
module.registration.description=Echo module for testing and validation in document processing pipeline
module.registration.capabilities=echo,testing,validation
module.registration.tags=echo,testing,module

# Disable for tests
%test.module.registration.enabled=false


# gRPC Message Size Configuration (2GB - 1 byte, max int value)
quarkus.grpc.server.max-inbound-message-size=2147483647


# JVM Memory settings for large message processing
quarkus.native.additional-build-args=-J-Xmx4g
%dev.quarkus.devservices.timeout=120s

# Quinoa Configuration


# Development root path for Traefik routing
%dev.quarkus.http.root-path=/modules/echo

# Compose Dev Services - Let Quarkus manage the compose file automatically
%dev.quarkus.compose.devservices.files=../../src/test/resources/compose-devservices.yml
%dev.quarkus.compose.devservices.start-services=true
%dev.quarkus.compose.devservices.stop-services=false
%dev.quarkus.compose.devservices.project-name=pipeline-shared-devservices


## TEST CLIENT CONFIGURATION
%test.quarkus.http.port=49000
%test.quarkus.grpc.server.use-separate-server=false
%test.quarkus.grpc.clients.echo-service.host=localhost
%test.quarkus.grpc.clients.echo-service.test-port=49000
%test.quarkus.grpc.clients.echo-service.name-resolver=dns
%test.quarkus.grpc.clients.echo-service.plain-text=true
%test.quarkus.grpc.clients.echo-service.max-inbound-message-size=21474836
